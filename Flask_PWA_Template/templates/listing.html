{% extends 'layout.html' %} {% block content %}

<div class="gallery">
  {% for url in images %}
  <div class="gallery-item">
    <img src="{{ url }}" alt="Photo of {{ listing.Title }} #{{ loop.index }}" />
  </div>
  {% endfor %}
</div>

<div class="hero-info">
  <h1>{{ listing.Title or listing.Title }}</h1>
  
    {% if average_rating is not none %}
    <div class="rating-circles">
    {% for i in range(1, 6) %}
      {% if average_rating >= i %}
        <div class="circle full"></div>
      {% elif average_rating + 0.5 >= i %}
        <div class="circle half"></div>
      {% else %}
        <div class="circle empty"></div>
      {% endif %}
    {% endfor %}
    <span class="rating-text">{{ average_rating | round(1) }}/5</span>
    {% endif %}
  </div>

  <p class="location">{{ listing.Location }}</p>
  <p class="price">${{ listing.Price }}</p>
  <p class="opening-hours">Opening Hours: {{ listing.Opening_Hours }}</p>
  <p class="description">{{ listing.Description }}</p>
</div>

<div class="post-container">
  {% for row in posts %}
    <div class="post-card">
      <div class="rating">
      {% for i in range(1, 6) %}
          {% if i <= row['Post_Rating'] %}
            <span class="rating-circle filled"></span>
          {% else %}
            <span class="rating-circle"></span>
          {% endif %}
        {% endfor %}
      </div>
      <p class="post-card-username">{{ row[''] }}</p>
      <p class="post-card-date">{{ row['Date'] }}</p>
      <p class="post-card-text">{{ row['Text'] }}</p>
    </div>
  {% endfor %}
</div>

{% endblock %}
