{% extends "layout.html" %}
{% block title %}Register{% endblock %}
{% block content %}
<section class="auth-card">
  <h1>Create an account</h1>

  <form method="post" action="{{ url_for('register') }}" novalidate>
    <div class="form-row">
      <label for="username">Username</label>
      <input id="username" name="username" type="text" required maxlength="150" autofocus />
    </div>

    <div class="form-row">
      <label for="email">Email</label>
      <input id="email" name="email" type="email" required maxlength="255" />
    </div>

    <div class="form-row">
      <label for="password">Password</label>
      <input id="password" name="password" type="password" required minlength="8" />
    </div>

    <div class="form-row">
      <label for="confirm">Confirm password</label>
      <input id="confirm" name="confirm" type="password" required minlength="8" />
    </div>

    <div class="form-actions">
      <button type="submit">Register</button>
    </div>
  </form>

  <p class="muted">
    Already have an account? <a href="{{ url_for('log_in') }}">Log in</a>
  </p>
</section>

<script>
  // Simple client-side check to avoid submitting mismatched passwords
  (function () {
    const form = document.querySelector('form[action="{{ url_for("register") }}"]');
    if (!form) return;
    form.addEventListener('submit', function (e) {
      const p = form.querySelector('#password').value;
      const c = form.querySelector('#confirm').value;
      if (p !== c) {
        e.preventDefault();
        alert('Passwords do not match.');
      }
    });
  })();
</script>

{%endblock%}